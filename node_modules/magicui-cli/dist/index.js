#!/usr/bin/env node
import{existsSync as ae,promises as Ne}from"fs";import Y from"path";import et from"crypto";import Q from"os";function U(){let t=Q.userInfo().username,e=Q.hostname(),r=Q.platform(),n=`${t}-${e}-${r}`;return et.createHash("md5").update(n).digest("hex")}import ue from"path";import{createMatchPath as tt}from"tsconfig-paths";async function ee(t,e){return tt(e.absoluteBaseUrl,e.paths)(t,void 0,()=>!0,[".ts",".tsx"])}import{cosmiconfig as rt}from"cosmiconfig";import{loadConfig as nt}from"tsconfig-paths";import{z as f}from"zod";var he="@/components";var xe="@/lib/utils",ye="app/globals.css",we="tailwind.config.js";var ot=rt("components",{searchPlaces:["components.json"]}),F=f.object({$schema:f.string().optional(),style:f.string(),rsc:f.coerce.boolean().default(!1),tsx:f.coerce.boolean().default(!0),tailwind:f.object({config:f.string(),css:f.string(),baseColor:f.string(),cssVariables:f.boolean().default(!0),prefix:f.string().default("").optional()}),aliases:f.object({components:f.string(),utils:f.string(),ui:f.string().optional(),magicui:f.string().optional()})}).strict(),it=F.extend({resolvedPaths:f.object({tailwindConfig:f.string(),tailwindCss:f.string(),utils:f.string(),components:f.string(),ui:f.string(),magicui:f.string()})});async function b(t){let e=await st(t);return e?await E(t,e):null}async function E(t,e){let r=await nt(t);if(r.resultType==="failed")throw new Error(`Failed to load ${e.tsx?"tsconfig":"jsconfig"}.json. ${r.message??""}`.trim());let n=await ee(e.aliases.components,r),o=`${n}/ui`,i=`${n}/magicui`,s={ui:`${e.aliases.components}/ui`,magicui:`${e.aliases.components}/magicui`},a={...e,aliases:{...e.aliases,...s},resolvedPaths:{tailwindConfig:ue.resolve(t,e.tailwind.config),tailwindCss:ue.resolve(t,e.tailwind.css),utils:await ee(e.aliases.utils,r),components:n,ui:o,magicui:i}};return it.parse(a)}async function st(t){try{let e=await ot.search(t);return e?F.parse(e.config):null}catch{throw new Error(`Invalid configuration found in ${t}/components.json.`)}}import at from"configstore";var ct="MAGICUI_PRO_ENV",lt=new at("magicui"),R=()=>lt.get(ct);import{detect as pt}from"@antfu/ni";async function W(t){let e=await pt({programmatic:!0,cwd:t});return e==="yarn@berry"?"yarn":e==="pnpm@6"?"pnpm":e==="bun"?"bun":e??"npm"}import M from"chalk";import mt from"gradient-string";var u={error(...t){console.log(M.red(...t))},warn(...t){console.log(M.yellow(...t))},info(...t){console.log(M.cyan(...t))},success(...t){console.log(M.green(...t))},break(){console.log("")}},ft=`
   __    __     ______     ______     __     ______        __  __     __    
  /\\ "-./  \\   /\\  __ \\   /\\  ___\\   /\\ \\   /\\  ___\\      /\\ \\/\\ \\   /\\ \\   
  \\ \\ \\-./\\ \\  \\ \\  __ \\  \\ \\ \\__ \\  \\ \\ \\  \\ \\ \\____     \\ \\ \\_\\ \\  \\ \\ \\  
   \\ \\_\\ \\ \\_\\  \\ \\_\\ \\_\\  \\ \\_____\\  \\ \\_\\  \\ \\_____\\     \\ \\_____\\  \\ \\_\\ 
    \\/_/  \\/_/   \\/_/\\/_/   \\/_____/   \\/_/   \\/_____/      \\/_____/   \\/_/ 
                                                                   
`,dt=`
 ##   ##                      ##                  ##   ##   ####           ######                    
 ### ###                                          ##   ##    ##             ##  ##                   
 #######   ####     ### ##   ###      ####        ##   ##    ##             ##  ##  ######    ####   
 #######      ##   ##  ##     ##     ##  ##       ##   ##    ##             #####    ##  ##  ##  ##  
 ## # ##   #####   ##  ##     ##     ##           ##   ##    ##             ##       ##      ##  ##  
 ##   ##  ##  ##    #####     ##     ##  ##       ##   ##    ##             ##       ##      ##  ##  
 ##   ##   #####       ##    ####     ####         #####    ####           ####     ####      ####   
                   #####                                                                           
`,gt=`
        ...:::::::::::::::::::::::::::::::::::::::..        
     .:::::-----------------------------------------:::.    
   .:::-------------------------------------------------:   
  :::-----------------------------------------------------. 
 :::-------------------------------------------------------.
.::--------------------------------------.    .------------:
:::------------------------------------.   .:   .-----------
::-----------------------------------.   :----:   ----------
::---------------------------------.   :------:   ----------
::-------------------------------.   :------:   .-----------
::-----------------------------.    :-----:   .-------------
::---------------------------.   ..   :-:   .---------------
::-------------------------.   .---:.     .-----------------
::-----------------------.   .------:   .-------------------
::---------------------.   .------:   .---------------------
::-------------------.   :------:   .-----------------------
::-----------------.   :------:   .---------------------:--:
::---------------.   :------:   .--------------------:::::::
::-------------.   :------:   .------------------:::::::::::
::-----------.   :------:   .-----------------::::::::::::::
:::--------.   :------:   .----------------:::::::::::::::::
:::-------   .------:   .---------------::::::::::::::::::::
:::-------   :----:   .--------------:::::::::::::::::::::::
:::--------.   ::   .------------:::::::::::::::::::::::::::
.::----------.    .-----------::::::::::::::::::::::::...::.
 ::------------------------::::::::::::::::::::::::.......: 
 .::--------------------::::::::::::::::::::::::.........:. 
   ::---------------:::::::::::::::::::::::::............   
    .::-----------:::::::::::::::::::::::::............     
       ..:::-----::::::::::::::::::::::::::::.......        
`,ut={magenta:"#9E7AFF",red:"#FE8BBB",yellow:"#FFBD7A"},B=mt(Object.values(ut)),V=B.multiline(ft),vr=B.multiline(gt),K=B.multiline(dt),j=`
Try Magic UI Pro for ready-made templates and more.
 \u2192 https://pro.magicui.design
`,O=`

Authenticated \u2705

You are using Magic UI Pro. Welcome \u2764\uFE0E
 \u2192 use '--pro' option with add command to view the premium components & blocks.
 \u2192 https://pro.magicui.design

`;var k=t=>B.multiline(t);function z(t){typeof t=="string"&&(u.error(t),process.exit(1)),t instanceof Error&&(u.error(t.message),process.exit(1)),u.error("Something went wrong. Please try again."),process.exit(1)}import{PostHog as ht}from"posthog-node";var _=new ht(!0,{host:"https://us.i.posthog.com"});process.env.NODE_ENV==="development"&&_.debug();import yt from"path";import{z as l}from"zod";var Te=l.object({name:l.string(),dependencies:l.array(l.string()).optional(),devDependencies:l.array(l.string()).optional(),registryDependencies:l.array(l.string()).optional(),files:l.array(l.string()),type:l.enum(["components:ui","components:component","components:example","components:magicui","components:blocks"])}),te=l.array(Te),xt=Te.extend({files:l.array(l.object({name:l.string(),content:l.string()}))}),re=l.array(xt),ve=l.array(l.object({name:l.string(),label:l.string()})),Ce=l.object({inlineColors:l.object({light:l.record(l.string(),l.string()),dark:l.record(l.string(),l.string())}),cssVars:l.object({light:l.record(l.string(),l.string()),dark:l.record(l.string(),l.string())}),inlineColorsTemplate:l.string(),cssVarsTemplate:l.string()});import{HttpsProxyAgent as wt}from"https-proxy-agent";import Tt from"node-fetch";var ne="https://magicui.design",_e="https://pro.magicui.design",G="https://ui.shadcn.com",vt=process.env.https_proxy?new wt(process.env.https_proxy):void 0;async function Ie(t){try{let[e]=await I(["index.json"],ne),[r]=t?await I(["index.json"],_e):[[]];return te.parse([...e,...r])}catch(e){throw console.error(e),new Error("Failed to fetch components from Magic UI registry.")}}async function Se(){try{let[t]=await I(["index.json"],G);return te.parse(t)}catch(t){throw console.error(t),new Error("Failed to fetch components from Shadcn UI registry.")}}async function oe(){try{let[t]=await I(["styles/index.json"],G);return ve.parse(t)}catch{throw new Error("Failed to fetch styles from registry.")}}async function ie(){return[{name:"slate",label:"Slate"},{name:"gray",label:"Gray"},{name:"zinc",label:"Zinc"},{name:"neutral",label:"Neutral"},{name:"stone",label:"Stone"}]}async function J(t){try{let[e]=await I([`colors/${t}.json`],G);return Ce.parse(e)}catch{throw new Error("Failed to fetch base color from registry.")}}async function L(t,e,r,n=!1){let o=[],i=[];for(let s of r)if(n){let a=t.find(c=>c.name===s);if(!a)continue;if(o.push(a),a.registryDependencies){let{shadcnTree:c}=await L(t,e,a.registryDependencies,!0);o.push(...c)}}else{let a=e.find(c=>c.name===s);if(!a){let c=s.split(":")[1],m=t.find(p=>p.name===c);if(!m)continue;if(o.push(m),m.registryDependencies){let{shadcnTree:p}=await L(t,e,m.registryDependencies,!0);o.push(...p)}}if(a&&i.push(a),a&&a.registryDependencies){let{magicuiTree:c,shadcnTree:m}=await L(t,e,a.registryDependencies,!1);o.push(...m),i.push(...c)}}return{shadcnTree:o.filter((s,a,c)=>c.findIndex(m=>m.name===s.name)===a),magicuiTree:i.filter((s,a,c)=>c.findIndex(m=>m.name===s.name)===a)}}async function be(t,e){try{let r=t.filter(c=>!c.type.includes("blocks")),n=t.filter(c=>c.type.includes("blocks")),o=r.map(c=>{let[m,p]=c.type.split(":");return`${m}/${p}/${c.name}.json`}),i=await I(o,ne),s=n.map(c=>{let[m,p]=c.type.split(":");return`${m}/${p}/${c.name}.json`}),a=await I(s,_e,e);return re.parse([...i,...a])}catch{throw new Error("Failed to fetch tree from Magic UI registry.")}}async function Ee(t,e){try{let r=e.map(o=>`styles/${t}/${o.name}.json`),n=await I(r,G);return re.parse(n)}catch{throw new Error("Failed to fetch tree from Shadcn UI registry.")}}async function Pe(t,e,r){if(r)return r;let[n,o]=e.type.split(":");return n in t.resolvedPaths?yt.join(t.resolvedPaths[n],o):null}async function I(t,e=ne,r){try{return await Promise.all(t.map(async o=>await(await Tt(`${e}/registry/${o}`,{agent:vt,headers:r?{cookie:`x-magicui-env=${r}`}:{}})).json()))}catch{throw new Error(`Failed to fetch registry from ${e}.`)}}import{promises as At}from"fs";import{tmpdir as Dt}from"os";import ke from"path";import{SyntaxKind as Ct}from"ts-morph";var $e=async({sourceFile:t,config:e,baseColor:r})=>(e.tailwind?.cssVariables||!r?.inlineColors||t.getDescendantsOfKind(Ct.StringLiteral).forEach(n=>{let o=n.getText();if(o){let i=It(o.replace(/"/g,""),r.inlineColors);n.replaceWithText(`"${i.trim()}"`)}}),t);function se(t){if(!t.includes("/")&&!t.includes(":"))return[null,t,null];let e=[],[r,n]=t.split("/");if(!r.includes(":"))return[null,r,n];let o=r.split(":"),i=o.pop(),s=o.join(":");return e.push(s??null,i??null,n??null),e}var _t=["bg-","text-","border-","ring-offset-","ring-"];function It(t,e){t.includes(" border ")&&(t=t.replace(" border "," border border-border "));let r=t.split(" "),n=new Set,o=new Set;for(let i of r){let[s,a,c]=se(i),m=_t.find(h=>a?.startsWith(h));if(!m){n.has(i)||n.add(i);continue}let p=a?.replace(m,"");if(p&&p in e.light){n.add([s,`${m}${e.light[p]}`].filter(Boolean).join(":")+(c?`/${c}`:"")),o.add(["dark",s,`${m}${e.dark[p]}`].filter(Boolean).join(":")+(c?`/${c}`:""));continue}n.has(i)||n.add(i)}return[...Array.from(n),...Array.from(o)].join(" ").trim()}var Ae=async({sourceFile:t,config:e})=>{let r=t.getImportDeclarations();for(let n of r){let o=n.getModuleSpecifierValue();o.startsWith("@/registry/")&&(e.aliases.ui?n.setModuleSpecifier(o.replace(/^@\/registry\/[^/]+\/ui/,e.aliases.ui)):n.setModuleSpecifier(o.replace(/^@\/registry\/[^/]+/,e.aliases.components))),o=="@/lib/utils"&&n.getNamedImports().find(a=>a.getName()==="cn")&&n.setModuleSpecifier(o.replace(/^@\/lib\/utils/,e.aliases.utils))}return t};import{transformFromAstSync as St}from"@babel/core";import{parse as bt}from"@babel/parser";import Et from"@babel/plugin-transform-typescript";import*as H from"recast";var Pt={sourceType:"module",allowImportExportEverywhere:!0,allowReturnOutsideFunction:!0,startLine:1,tokens:!0,plugins:["asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","classStaticBlock","decimal","decorators-legacy","doExpressions","dynamicImport","exportDefaultFrom","exportNamespaceFrom","functionBind","functionSent","importAssertions","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{proposal:"minimal"}],["recordAndTuple",{syntaxType:"hash"}],"throwExpressions","topLevelAwait","v8intrinsic","typescript","jsx"]},De=async({sourceFile:t,config:e})=>{let r=t.getFullText();if(e.tsx)return r;let n=H.parse(r,{parser:{parse:i=>bt(i,Pt)}}),o=St(n,r,{cloneInputAst:!1,code:!1,ast:!0,plugins:[Et],configFile:!1});if(!o||!o.ast)throw new Error("Failed to transform JSX");return H.print(o.ast).code};import{SyntaxKind as $t}from"ts-morph";var Fe=async({sourceFile:t,config:e})=>{if(e.rsc)return t;let r=t.getFirstChildByKind($t.ExpressionStatement);return r?.getText()==='"use client"'&&r.remove(),t};import{Project as Ft,ScriptKind as jt}from"ts-morph";import{SyntaxKind as d}from"ts-morph";var je=async({sourceFile:t,config:e})=>(e.tailwind?.prefix&&(t.getDescendantsOfKind(d.CallExpression).filter(r=>r.getExpression().getText()==="cva").forEach(r=>{if(r.getArguments()[0]?.isKind(d.StringLiteral)){let n=r.getArguments()[0];n&&n.replaceWithText(`"${v(n.getText()?.replace(/"/g,""),e.tailwind.prefix)}"`)}r.getArguments()[1]?.isKind(d.ObjectLiteralExpression)&&r.getArguments()[1]?.getDescendantsOfKind(d.PropertyAssignment).find(n=>n.getName()==="variants")?.getDescendantsOfKind(d.PropertyAssignment).forEach(n=>{n.getDescendantsOfKind(d.PropertyAssignment).forEach(o=>{let i=o.getInitializerIfKind(d.StringLiteral);i&&i?.replaceWithText(`"${v(i.getText()?.replace(/"/g,""),e.tailwind.prefix)}"`)})})}),t.getDescendantsOfKind(d.JsxAttribute).forEach(r=>{if(r.getName()==="className"){if(r.getInitializer()?.isKind(d.StringLiteral)){let n=r.getInitializer();n&&n.replaceWithText(`"${v(n.getText()?.replace(/"/g,""),e.tailwind.prefix)}"`)}if(r.getInitializer()?.isKind(d.JsxExpression)){let n=r.getInitializer()?.getDescendantsOfKind(d.CallExpression).find(o=>o.getExpression().getText()==="cn");n&&n.getArguments().forEach(o=>{(o.isKind(d.ConditionalExpression)||o.isKind(d.BinaryExpression))&&o.getChildrenOfKind(d.StringLiteral).forEach(i=>{i.replaceWithText(`"${v(i.getText()?.replace(/"/g,""),e.tailwind.prefix)}"`)}),o.isKind(d.StringLiteral)&&o.replaceWithText(`"${v(o.getText()?.replace(/"/g,""),e.tailwind.prefix)}"`)})}}r.getName()==="classNames"&&r.getInitializer()?.isKind(d.JsxExpression)&&r.getDescendantsOfKind(d.PropertyAssignment).forEach(n=>{if(n.getInitializer()?.isKind(d.CallExpression)){let o=n.getInitializerIfKind(d.CallExpression);o&&o.getArguments().forEach(i=>{i.isKind(d.ConditionalExpression)&&i.getChildrenOfKind(d.StringLiteral).forEach(s=>{s.replaceWithText(`"${v(s.getText()?.replace(/"/g,""),e.tailwind.prefix)}"`)}),i.isKind(d.StringLiteral)&&i.replaceWithText(`"${v(i.getText()?.replace(/"/g,""),e.tailwind.prefix)}"`)})}if(n.getInitializer()?.isKind(d.StringLiteral)&&n.getName()!=="variant"){let o=n.getInitializer();o&&o.replaceWithText(`"${v(o.getText()?.replace(/"/g,""),e.tailwind.prefix)}"`)}})})),t);function v(t,e=""){let r=t.split(" "),n=[];for(let o of r){let[i,s,a]=se(o);i?a?n.push(`${i}:${e}${s}/${a}`):n.push(`${i}:${e}${s}`):a?n.push(`${e}${s}/${a}`):n.push(`${e}${s}`)}return n.join(" ")}function Oe(t,e){let r=t.split(`
`);for(let n of r)if(n.includes("@apply")){let o=n.replace("@apply","").trim(),i=v(o,e);t=t.replace(o,i)}return t}var Ot=[Ae,Fe,$e,je],kt=new Ft({compilerOptions:{}});async function Lt(t){let e=await At.mkdtemp(ke.join(Dt(),"shadcn-"));return ke.join(e,t)}async function Le(t){let e=await Lt(t.filename),r=kt.createSourceFile(e,t.raw,{scriptKind:jt.TSX});for(let n of Ot)n({sourceFile:r,...t});return await De({sourceFile:r,...t})}import Ue from"chalk";import{Command as Nt}from"commander";import{execa as Re}from"execa";import Ut from"ora";import ce from"prompts";import{z as y}from"zod";var Rt=y.object({components:y.array(y.string()).optional(),yes:y.boolean(),overwrite:y.boolean(),cwd:y.string(),all:y.boolean(),pro:y.boolean(),example:y.boolean(),shadcn:y.boolean(),path:y.string().optional()}),N=R(),We=new Nt().name("add").description("Add ui components to your project").argument("[components...]","the components to add").option("-y, --yes","skip confirmation prompt.",!0).option("-o, --overwrite","overwrite existing files.",!1).option("-c, --cwd <cwd>","the working directory. defaults to the current directory.",process.cwd()).option("-a, --all","add all available components",!1).option("-m, --pro","include pro magic-ui blocks & components (make sure to add your secret .env)",!1).addHelpText("after",k(N?O:j)).option("-e, --example","include available examples & demos",!1).option("-s, --shadcn","include available components from shadcn-ui",!1).option("-p, --path <path>","the path to add the component to.").action(async(t,e)=>{console.log(N?K:V,k(N?O:j));try{let r=Rt.parse({components:t,...e}),n=Y.resolve(r.cwd);ae(n)||(u.error(`The path ${n} does not exist. Please try again.`),process.exit(1));let o=await b(n);if(o||(u.warn(`Configuration is missing. Please run ${Ue.green("init")} to create a components.json file.`),process.exit(1)),r.pro&&!N){u.warn("You're not authenticated to add Magic UI Pro components");return}let i=r.shadcn?[]:await Ie(r.pro),s=await Se(),a=r.all?(r.shadcn?s:i).map(g=>g.name):r.components;if(!r.components?.length&&!r.all){let g=()=>i.filter(T=>{let x=T.type.split(":")[1];return r.pro?x==="blocks":r.example?x==="example":x==="magicui"}),S=r.shadcn?s:g(),{components:ge}=await ce({type:"multiselect",name:"components",message:"Which components would you like to add?",hint:"Space to select. A to toggle all. Enter to submit.",instructions:!1,choices:S.map(T=>({title:T.name,value:T.name,selected:r.all?!0:r.components?.includes(T.name)}))});a=ge}a?.length||(u.warn("No components selected. Exiting."),process.exit(0));let{magicuiTree:c,shadcnTree:m}=await L(s,i,a,r.shadcn),p=await be(c,N),h=await Ee(o.style,m),C=await J(o.tailwind.baseColor);!p.length&&!h.length?(u.warn("Selected components not found. Exiting."),process.exit(0)):(p.length!==0&&u.info(`Found ${p.length}x Magic UI components.`),h.length!==0&&u.info(`Found ${h.length}x Shadcn UI components.`));let A=[...p,...h];if(!r.yes){let{proceed:g}=await ce({type:"confirm",name:"proceed",message:"Ready to install components and dependencies. Proceed?",initial:!0});g||process.exit(0)}let w=Ut("Installing components...").start();for(let g of A){w.text=`Installing ${g.name}...`;let S=await Pe(o,g,r.path?Y.resolve(n,r.path):void 0);if(!S)continue;if(ae(S)||await Ne.mkdir(S,{recursive:!0}),g.files.filter(x=>ae(Y.resolve(S,x.name))).length&&!r.overwrite)if(a.includes(g.name)){w.stop();let{overwrite:x}=await ce({type:"confirm",name:"overwrite",message:`Component ${g.name} already exists. Would you like to overwrite?`,initial:!1});if(!x){u.info(`Skipped ${g.name}. To overwrite, run with the ${Ue.green("--overwrite")} flag.`);continue}w.start(`Installing ${g.name}...`)}else continue;for(let x of g.files){let D=Y.resolve(S,x.name),Qe=await Le({filename:x.name,raw:x.content,config:o,baseColor:C});o.tsx||(D=D.replace(/\.tsx$/,".jsx"),D=D.replace(/\.ts$/,".js")),await Ne.writeFile(D,Qe)}let T=await W(n);if(g.dependencies?.length)try{await Re(T,[T==="npm"?"install":"add",...g.dependencies],{cwd:n})}catch(x){u.warn(`
Failed to install dependencies for ${g.name}.
	-${g.dependencies.join(`
	- `)}

Reason: ${x}`)}if(g.devDependencies?.length)try{await Re(T,[T==="npm"?"install":"add","-D",...g.devDependencies],{cwd:n})}catch(x){u.warn(`
Failed to install devDependencies for ${g.name}.
	-${g.devDependencies.join(`
	- `)}

Reason: ${x}`)}}_.capture({event:"cli_add",distinctId:U(),properties:{components:a,style:o.style,baseColor:o.tailwind.baseColor}}),w.succeed("Done.")}catch(r){z(r)}});import{existsSync as Xe,promises as P}from"fs";import $ from"path";import X from"path";import pe from"fast-glob";import le,{pathExists as Wt}from"fs-extra";import{loadConfig as Mt}from"tsconfig-paths";var me=["**/node_modules/**",".next","public","dist","build"];async function Me(t){let e=await b(t);if(e)return e;let r=await Bt(t),n=await Vt(t),o=await Kt(t);if(!r||!n||!o)return null;let i=await zt(t),s={$schema:"https://ui.shadcn.com/schema.json",rsc:["next-app","next-app-src"].includes(r),tsx:i,style:"new-york",tailwind:{config:i?"tailwind.config.ts":"tailwind.config.js",baseColor:"zinc",css:n,cssVariables:!0,prefix:""},aliases:{utils:`${o}/lib/utils`,components:`${o}/components`,magicui:`${o}/components/magicui`,ui:`${o}/components/ui`}};return await E(t,s)}async function Bt(t){if(!(await pe.glob("**/*",{cwd:t,deep:3,ignore:me})).find(i=>i.startsWith("next.config.")))return null;let n=await le.pathExists(X.resolve(t,"src"));return await le.pathExists(X.resolve(t,`${n?"src/":""}app`))?n?"next-app-src":"next-app":n?"next-pages-src":"next-pages"}async function Vt(t){let e=await pe.glob("**/*.css",{cwd:t,deep:3,ignore:me});if(!e.length)return null;for(let r of e)if((await le.readFile(X.resolve(t,r),"utf8")).includes("@tailwind base"))return r;return null}async function Kt(t){let e=await Mt(t);if(e?.resultType==="failed"||!e?.paths)return null;for(let[r,n]of Object.entries(e.paths))if(n.includes("./*")||n.includes("./src/*"))return r.at(0);return null}async function zt(t){return Wt(X.resolve(t,"tsconfig.json"))}async function Be(t){if(!(await pe.glob("tailwind.config.*",{cwd:t,deep:3,ignore:me})).length)throw new Error("Tailwind CSS is not installed. Visit https://tailwindcss.com/docs/installation to get started.");return!0}var Ve=`import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
`,Ke=`import { clsx } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs) {
  return twMerge(clsx(inputs))
}
`,ze=`/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: ["class"],
  content: [
    './pages/**/*.{<%- extension %>,<%- extension %>x}',
    './components/**/*.{<%- extension %>,<%- extension %>x}',
    './app/**/*.{<%- extension %>,<%- extension %>x}',
    './src/**/*.{<%- extension %>,<%- extension %>x}',
  ],
  prefix: "<%- prefix %>",
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      keyframes: {
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
}`,Ge=`/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: ["class"],
  content: [
    './pages/**/*.{<%- extension %>,<%- extension %>x}',
    './components/**/*.{<%- extension %>,<%- extension %>x}',
    './app/**/*.{<%- extension %>,<%- extension %>x}',
    './src/**/*.{<%- extension %>,<%- extension %>x}',
  ],
  prefix: "<%- prefix %>",
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      keyframes: {
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
}`,Je=`import type { Config } from "tailwindcss"

const config = {
  darkMode: ["class"],
  content: [
    './pages/**/*.{<%- extension %>,<%- extension %>x}',
    './components/**/*.{<%- extension %>,<%- extension %>x}',
    './app/**/*.{<%- extension %>,<%- extension %>x}',
    './src/**/*.{<%- extension %>,<%- extension %>x}',
  ],
  prefix: "<%- prefix %>",
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      keyframes: {
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
} satisfies Config

export default config`,He=`import type { Config } from "tailwindcss"

const config = {
  darkMode: ["class"],
  content: [
    './pages/**/*.{<%- extension %>,<%- extension %>x}',
    './components/**/*.{<%- extension %>,<%- extension %>x}',
    './app/**/*.{<%- extension %>,<%- extension %>x}',
    './src/**/*.{<%- extension %>,<%- extension %>x}',
	],
  prefix: "<%- prefix %>",
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      keyframes: {
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
} satisfies Config

export default config`;import de from"chalk";import{Command as Jt}from"commander";import{execa as Ht}from"execa";import Yt from"lodash.template";import Z from"ora";import fe from"prompts";import{z as q}from"zod";var Xt=["tailwindcss-animate","class-variance-authority","clsx","tailwind-merge","framer-motion"],qt=q.object({cwd:q.string(),yes:q.boolean(),defaults:q.boolean()}),qe=new Jt().name("init").description("Initialize your project with shadcn-ui config & magic-ui").option("-y, --yes","skip confirmation prompt.",!1).option("-d, --defaults,","use default configuration.",!1).option("-c, --cwd <cwd>","the working directory. defaults to the current directory.",process.cwd()).action(async t=>{try{let e=qt.parse(t),r=$.resolve(e.cwd);Xe(r)||(u.error(`The path ${r} does not exist. Please try again.`),process.exit(1)),Be(r);let n=await Me(r);if(n){let o=await Qt(r,n,t.defaults);await Ye(r,o)}else{let o=await b(r),i=await Zt(r,o,e.yes);await Ye(r,i)}_.capture({distinctId:U(),event:"cli_init",properties:{cwd:r,options:e}}),u.info(""),u.info(`${de.green("Success!")} Project initialization completed. You may now add both shadcn-ui and magic-ui components.`),u.info("")}catch(e){z(e)}});async function Zt(t,e=null,r=!1){let n=p=>de.cyan(p),o=await oe(),i=await ie(),s=await fe([{type:"toggle",name:"typescript",message:`Would you like to use ${n("TypeScript")} (recommended)?`,initial:e?.tsx??!0,active:"yes",inactive:"no"},{type:"select",name:"style",message:`Which ${n("style")} would you like to use?`,choices:o.map(p=>({title:p.label,value:p.name}))},{type:"select",name:"tailwindBaseColor",message:`Which color would you like to use as ${n("base color")}?`,choices:i.map(p=>({title:p.label,value:p.name}))},{type:"text",name:"tailwindCss",message:`Where is your ${n("global CSS")} file?`,initial:e?.tailwind.css??ye},{type:"toggle",name:"tailwindCssVariables",message:`Would you like to use ${n("CSS variables")} for colors?`,initial:e?.tailwind.cssVariables??!0,active:"yes",inactive:"no"},{type:"text",name:"tailwindPrefix",message:`Are you using a custom ${n("tailwind prefix eg. tw-")}? (Leave blank if not)`,initial:""},{type:"text",name:"tailwindConfig",message:`Where is your ${n("tailwind.config.js")} located?`,initial:e?.tailwind.config??we},{type:"text",name:"components",message:`Configure the import alias for ${n("components")}:`,initial:e?.aliases.components??he},{type:"text",name:"utils",message:`Configure the import alias for ${n("utils")}:`,initial:e?.aliases.utils??xe},{type:"toggle",name:"rsc",message:`Are you using ${n("React Server Components")}?`,initial:e?.rsc??!0,active:"yes",inactive:"no"}]),a=F.parse({$schema:"https://ui.shadcn.com/schema.json",style:s.style,tailwind:{config:s.tailwindConfig,css:s.tailwindCss,baseColor:s.tailwindBaseColor,cssVariables:s.tailwindCssVariables,prefix:s.tailwindPrefix},rsc:s.rsc,tsx:s.typescript,aliases:{utils:s.utils,components:s.components,ui:`${s.components}/ui`,magicui:`${s.components}/magicui`}});if(!r){let{proceed:p}=await fe({type:"confirm",name:"proceed",message:`Write configuration to ${n("components.json")}. Proceed?`,initial:!0});p||process.exit(0)}u.info("");let c=Z("Writing components.json...").start(),m=$.resolve(t,"components.json");return await P.writeFile(m,JSON.stringify(a,null,2),"utf8"),c.succeed(),await E(t,a)}async function Qt(t,e,r=!1){let n=h=>de.cyan(h),o=e.style,i=e.tailwind.baseColor,s=e.tailwind.cssVariables;if(!r){let h=await oe(),C=await ie(),A=await fe([{type:"select",name:"style",message:`Which ${n("style")} would you like to use?`,choices:h.map(w=>({title:w.label,value:w.name}))},{type:"select",name:"tailwindBaseColor",message:`Which color would you like to use as ${n("base color")}?`,choices:C.map(w=>({title:w.label,value:w.name}))},{type:"toggle",name:"tailwindCssVariables",message:`Would you like to use ${n("CSS variables")} for colors?`,initial:e?.tailwind.cssVariables,active:"yes",inactive:"no"}]);o=A.style,i=A.tailwindBaseColor,s=A.tailwindCssVariables}let a={$schema:e?.$schema,style:o,tailwind:{...e?.tailwind,baseColor:i,cssVariables:s},rsc:e?.rsc,tsx:e?.tsx,aliases:e?.aliases},c=F.parse(a);u.info("");let m=Z("Writing components.json...").start(),p=$.resolve(t,"components.json");return await P.writeFile(p,JSON.stringify(c,null,2),"utf8"),m.succeed(),await E(t,c)}async function Ye(t,e){let r=Z("Initializing project...")?.start();for(let[p,h]of Object.entries(e.resolvedPaths)){let C=$.extname(h)?$.dirname(h):h;p==="utils"&&h.endsWith("/utils")&&(C=C.replace(/\/utils$/,"")),Xe(C)||await P.mkdir(C,{recursive:!0})}let n=e.tsx?"ts":"js",o=$.extname(e.resolvedPaths.tailwindConfig),i;o===".ts"?i=e.tailwind.cssVariables?He:Je:i=e.tailwind.cssVariables?Ge:ze,await P.writeFile(e.resolvedPaths.tailwindConfig,Yt(i)({extension:n,prefix:e.tailwind.prefix}),"utf8");let s=await J(e.tailwind.baseColor);s&&await P.writeFile(e.resolvedPaths.tailwindCss,e.tailwind.cssVariables?e.tailwind.prefix?Oe(s.cssVarsTemplate,e.tailwind.prefix):s.cssVarsTemplate:s.inlineColorsTemplate,"utf8"),await P.writeFile(`${e.resolvedPaths.utils}.${n}`,n==="ts"?Ve:Ke,"utf8"),r?.succeed();let a=Z("Installing dependencies...")?.start(),c=await W(t),m=[...Xt,e.style==="new-york"?"@radix-ui/react-icons":"lucide-react"];await Ht(c,[c==="npm"?"install":"add",...m],{cwd:t}),a?.succeed()}import{Command as rr}from"commander";import er from"path";import tr from"fs-extra";function Ze(){let t=er.join("package.json");return tr.readJSONSync(t)}process.on("SIGINT",async()=>{await _.shutdown(),process.exit(0)});process.on("SIGTERM",async()=>{await _.shutdown(),process.exit(0)});async function nr(){let t=await Ze(),e=R(),r=new rr().addHelpText("before",e?K:V).addHelpText("after",k(e?O:j)).name("magicui-cli").description("Add Magic UI components to your apps.").version(t.version||"1.0.0","-v, --version","display the version number");r.addCommand(qe).addCommand(We),r.parse()}nr();
//# sourceMappingURL=index.js.map